<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MegaClick</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 15px;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 24px;
            color: #00ff88;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-info {
            font-size: 20px;
            font-weight: bold;
            color: #ffcc00;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫–µ—Ä */
        .clicker-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            border: 2px solid #00ff88;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
        }

        .click-counter {
            font-size: 48px;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.7);
            margin-bottom: 10px;
        }

        .click-power {
            font-size: 18px;
            color: #4dccff;
            margin-bottom: 20px;
        }

        .click-btn {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(145deg, #ff416c, #ff4b2b);
            border: none;
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(255, 65, 108, 0.4);
        }

        .click-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 65, 108, 0.6);
        }

        .click-btn:active {
            transform: scale(0.95);
        }

        .click-btn i {
            font-size: 60px;
        }

        .auto-clicks {
            font-size: 16px;
            color: #ffcc00;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è */
        .stats-box, .upgrades-section, .achievements-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        h3 {
            color: #4dccff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-item span {
            color: #aaa;
            font-size: 14px;
        }

        .stat-item strong {
            color: #00ff88;
            font-size: 18px;
        }

        /* –£–ª—É—á—à–µ–Ω–∏—è */
        .upgrades-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .upgrade-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .upgrade-item:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #00ff88;
        }

        .upgrade-item.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .upgrade-icon {
            font-size: 24px;
            width: 40px;
            text-align: center;
        }

        .upgrade-info {
            flex: 1;
            padding: 0 15px;
        }

        .upgrade-name {
            font-weight: bold;
            color: white;
            margin-bottom: 5px;
        }

        .upgrade-desc {
            font-size: 12px;
            color: #aaa;
        }

        .upgrade-price {
            color: #ffcc00;
            font-weight: bold;
            font-size: 16px;
        }

        /* –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .achievement {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 2px solid #333;
        }

        .achievement.unlocked {
            border-color: #ffcc00;
            background: rgba(255, 204, 0, 0.1);
        }

        .achievement i {
            font-size: 24px;
            color: #666;
            margin-bottom: 8px;
        }

        .achievement.unlocked i {
            color: #ffcc00;
        }

        .achievement-name {
            font-size: 12px;
            color: #aaa;
        }

        /* –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .footer {
            display: flex;
            justify-content: space-around;
            padding: 20px 0;
        }

        .btn {
            padding: 12px 25px;
            background: linear-gradient(145deg, #4776E6, #8E54E9);
            border: none;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(142, 84, 233, 0.4);
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #1a1a2e;
            padding: 30px;
            border-radius: 25px;
            max-width: 400px;
            width: 90%;
            border: 2px solid #00ff88;
        }

        .modal-content p {
            margin: 10px 0;
            color: #ccc;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes clickEffect {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .click-animation {
            animation: clickEffect 0.2s;
        }

        @keyframes coinGain {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        .coin-gain {
            position: absolute;
            color: #ffcc00;
            font-weight: bold;
            font-size: 20px;
            animation: coinGain 1s forwards;
            pointer-events: none;
        }

        /* –†–µ—Å—É—Ä—Å—ã */
        .resources {
            display: flex;
            gap: 20px;
        }

        .resource {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            padding: 8px 15px;
            border-radius: 20px;
            background: rgba(0, 0, 0, 0.3);
        }

        .coins { color: #ffcc00; }
        .energy { color: #00ff88; }
        .gems { color: #ff00ff; }

        /* –ü–∞–Ω–µ–ª—å —ç–Ω–µ—Ä–≥–∏–∏ */
        .energy-bar-container {
            margin: 15px 0;
            position: relative;
        }

        .energy-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            border-radius: 10px;
            width: 100%;
            transition: width 0.3s;
        }

        .energy-text {
            position: absolute;
            right: 10px;
            top: 0;
            line-height: 20px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∞–≤—Ç–æ –∏ –≤—Ä–∞–≥–∞—Ö */
        .auto-info {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            font-size: 16px;
            color: #4dccff;
        }

        /* –¢–∞–±—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: #4776E6;
            color: white;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* –ó–∞—â–∏—Ç–∞ */
        .defense-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .defense-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .defense-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            min-width: 150px;
        }

        .small-btn {
            padding: 8px 15px;
            background: linear-gradient(145deg, #00ff88, #00ccff);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 12px;
        }

        .small-btn:hover {
            opacity: 0.9;
        }

        /* –í—Ä–∞–≥–∏ */
        .enemies-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .enemy {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #ff416c, #ff4b2b);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: pulse 2s infinite;
        }

        .enemy-health {
            position: absolute;
            bottom: -20px;
            width: 100%;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .enemy-health-fill {
            height: 100%;
            background: #00ff88;
            transition: width 0.3s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏ */
        @keyframes attack {
            0% { transform: translateX(0); }
            50% { transform: translateX(-20px); }
            100% { transform: translateX(0); }
        }

        .attacking {
            animation: attack 0.3s;
        }

        /* –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π */
        .upgrade-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            margin-bottom: 10px;
        }

        .upgrade-item:hover {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .upgrade-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade-item.locked:hover {
            border-color: transparent;
            background: rgba(255, 255, 255, 0.1);
        }

        .upgrade-cost {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        .stat-label {
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            color: #00ff88;
            font-weight: bold;
            font-size: 16px;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .resources {
                flex-direction: column;
                gap: 5px;
            }

            .defense-info {
                flex-direction: column;
                gap: 10px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .click-btn {
                width: 180px;
                height: 180px;
            }

            .click-counter {
                font-size: 40px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1><i class="fas fa-rocket"></i> MegaClick</h1>
            <div class="resources">
                <div class="resource coins">
                    <i class="fas fa-coins"></i>
                    <span id="coins">100</span>
                </div>
                <div class="resource energy">
                    <i class="fas fa-bolt"></i>
                    <span id="energy">100/100</span>
                </div>
                <div class="resource gems">
                    <i class="fas fa-gem"></i>
                    <span id="gems">10</span>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–∫–µ—Ä -->
        <div class="clicker-container">
            <div class="click-counter" id="clickCounter">0</div>
            <div class="click-power">–°–∏–ª–∞ –∫–ª–∏–∫–∞: <span id="clickPower">1</span></div>
            <button class="click-btn" id="clickBtn">
                <i class="fas fa-hand-point-up"></i>
                –ö–õ–ò–ö–ê–ô!
            </button>
            <div class="auto-clicks">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã: <span id="autoClickers">0</span></div>
            
            <!-- –ü–∞–Ω–µ–ª—å —ç–Ω–µ—Ä–≥–∏–∏ -->
            <div class="energy-bar-container">
                <div class="energy-bar">
                    <div class="energy-fill" id="energyFill" style="width: 100%"></div>
                </div>
                <div class="energy-text" id="energyText">100%</div>
            </div>
            
            <div class="auto-info">
                <div>–í—Ä–∞–≥–∏: <span id="enemies">0</span></div>
                <div>–©–∏—Ç: <span id="shieldLevel">1</span></div>
                <div>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: <span id="generatorLevel">1</span></div>
            </div>
        </div>

        <!-- –ó–∞—â–∏—Ç–∞ -->
        <div class="defense-section">
            <h3><i class="fas fa-shield-alt"></i> –ó–∞—â–∏—Ç–∞</h3>
            <div class="defense-info">
                <div class="defense-item">
                    <i class="fas fa-shield-alt" style="font-size: 30px; color: #00ff88;"></i>
                    <div>–£—Ä–æ–≤–µ–Ω—å —â–∏—Ç–∞: <span id="shieldLevel2">1</span></div>
                    <button class="small-btn" onclick="upgradeShield()">–£–ª—É—á—à–∏—Ç—å (50‚ö°)</button>
                </div>
                <div class="defense-item">
                    <i class="fas fa-bolt" style="font-size: 30px; color: #4dccff;"></i>
                    <div>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: <span id="generatorLevel2">1</span></div>
                    <button class="small-btn" onclick="upgradeGenerator()">–£–ª—É—á—à–∏—Ç—å (100‚ö°)</button>
                </div>
            </div>
            <div class="enemies-container" id="enemiesContainer"></div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-box">
            <h3><i class="fas fa-chart-line"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="stats-grid" id="statsGrid">
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
        </div>

        <!-- –£–ª—É—á—à–µ–Ω–∏—è -->
        <div class="upgrades-section">
            <h3><i class="fas fa-cogs"></i> –£–ª—É—á—à–µ–Ω–∏—è</h3>
            <div class="tabs">
                <button class="tab-btn active" data-tab="click">–ö–ª–∏–∫</button>
                <button class="tab-btn" data-tab="energy">–≠–Ω–µ—Ä–≥–∏—è</button>
                <button class="tab-btn" data-tab="defense">–ó–∞—â–∏—Ç–∞</button>
            </div>
            <div class="upgrades-grid" id="upgradesGrid">
                <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
        </div>

        <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
        <div class="achievements-section">
            <h3><i class="fas fa-trophy"></i> –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
            <div class="achievements-grid" id="achievementsGrid">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º -->
            </div>
        </div>

        <!-- –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
        <div class="footer">
            <button class="btn" id="saveBtn">
                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
            <button class="btn" onclick="startAttack()">
                <i class="fas fa-crosshairs"></i> –ê—Ç–∞–∫–æ–≤–∞—Ç—å
            </button>
            <button class="btn" id="helpBtn">
                <i class="fas fa-question-circle"></i> –ü–æ–º–æ—â—å
            </button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–º–æ—â–∏ -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <h3 style="color: #00ff88; margin-bottom: 20px;"><i class="fas fa-question-circle"></i> –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</h3>
            <p>üéØ <strong>–¶–µ–ª—å:</strong> –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–µ, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–æ–Ω–µ—Ç—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è!</p>
            <p>‚ö° <strong>–≠–Ω–µ—Ä–≥–∏—è:</strong> –ö–∞–∂–¥—ã–π –∫–ª–∏–∫ —Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é. –û–Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.</p>
            <p>üõ° <strong>–ó–∞—â–∏—Ç–∞:</strong> –£–ª—É—á—à–∞–π—Ç–µ —â–∏—Ç –∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –≤—Ä–∞–≥–æ–≤.</p>
            <p>üèÜ <strong>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:</strong> –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.</p>
            <p>üí∞ <strong>–£–ª—É—á—à–µ–Ω–∏—è:</strong> –ü–æ–∫—É–ø–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å —Å–∏–ª—å–Ω–µ–µ!</p>
            <p style="margin-top: 20px; color: #ffcc00;"><i class="fas fa-lightbulb"></i> –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–π—Å—Ç–≤–∏–∏.</p>
            <button class="btn" id="closeHelp" style="margin-top: 20px; width: 100%;">–ü–æ–Ω—è—Ç–Ω–æ!</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.enableClosingConfirmation();
        }

        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameState = {
            // –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
            clicks: 0,
            coins: 100,
            energy: 100,
            maxEnergy: 100,
            gems: 10,

            // –£–ª—É—á—à–µ–Ω–∏—è
            clickPower: 1,
            autoClickers: 0,
            enemies: 0,

            // –ó–∞—â–∏—Ç–∞
            shieldLevel: 1,
            generatorLevel: 1,

            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            totalClicks: 0,
            totalCoinsEarned: 100,
            totalEnemiesDefeated: 0,
            playTime: 0,
            clicksPerSecond: 0,

            // –£–ª—É—á—à–µ–Ω–∏—è (—É—Ä–æ–≤–Ω–∏)
            upgrades: {
                // –í–∫–ª–∞–¥–∫–∞ "–ö–ª–∏–∫"
                power_boost: 0,
                mega_click: 0,
                critical_chance: 0,

                // –í–∫–ª–∞–¥–∫–∞ "–≠–Ω–µ—Ä–≥–∏—è"
                energy_capacity: 0,
                energy_regen: 0,
                efficient_clicks: 0,

                // –í–∫–ª–∞–¥–∫–∞ "–ó–∞—â–∏—Ç–∞"
                shield_power: 0,
                enemy_resistance: 0,
                auto_defense: 0
            },

            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            achievements: {
                first_100_clicks: false,
                energy_master: false,
                enemy_slayer: false,
                rich_player: false,
                click_god: false
            }
        };

        // –î–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏–π
        const upgradesData = {
            click: [
                {
                    id: 'power_boost',
                    name: 'üí™ –£—Å–∏–ª–µ–Ω–∏–µ —Å–∏–ª—ã',
                    description: '+1 –∫ —Å–∏–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–∫–∞',
                    icon: 'fas fa-fist-raised',
                    basePrice: 10,
                    priceMultiplier: 1.5,
                    maxLevel: 50,
                    effect: () => { gameState.clickPower += 1; }
                },
                {
                    id: 'mega_click',
                    name: '‚ö° –ú–µ–≥–∞-–∫–ª–∏–∫',
                    description: '–®–∞–Ω—Å 5% –Ω–∞ 10x —É—Ä–æ–Ω',
                    icon: 'fas fa-bolt',
                    basePrice: 50,
                    priceMultiplier: 1.8,
                    maxLevel: 20,
                    effect: () => { }
                },
                {
                    id: 'critical_chance',
                    name: 'üéØ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä',
                    description: '+3% —à–∞–Ω—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞ (2x)',
                    icon: 'fas fa-crosshairs',
                    basePrice: 30,
                    priceMultiplier: 1.6,
                    maxLevel: 20,
                    effect: () => { }
                }
            ],
            energy: [
                {
                    id: 'energy_capacity',
                    name: 'üîã –ï–º–∫–æ—Å—Ç—å —ç–Ω–µ—Ä–≥–∏–∏',
                    description: '+20 –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏',
                    icon: 'fas fa-battery-full',
                    basePrice: 25,
                    priceMultiplier: 1.4,
                    maxLevel: 20,
                    effect: () => {
                        gameState.maxEnergy += 20;
                        gameState.energy = Math.min(gameState.energy + 20, gameState.maxEnergy);
                    }
                },
                {
                    id: 'energy_regen',
                    name: '‚ö° –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è',
                    description: '+1 —ç–Ω–µ—Ä–≥–∏—è/—Å–µ–∫',
                    icon: 'fas fa-bolt',
                    basePrice: 40,
                    priceMultiplier: 1.7,
                    maxLevel: 15,
                    effect: () => { }
                },
                {
                    id: 'efficient_clicks',
                    name: 'üéØ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–∫–∏',
                    description: '-10% —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –∫–ª–∏–∫',
                    icon: 'fas fa-hand-paper',
                    basePrice: 60,
                    priceMultiplier: 1.9,
                    maxLevel: 10,
                    effect: () => { }
                }
            ],
            defense: [
                {
                    id: 'shield_power',
                    name: 'üõ° –ú–æ—â–Ω–æ—Å—Ç—å —â–∏—Ç–∞',
                    description: '+10% –∫ –∑–∞—â–∏—Ç–µ —â–∏—Ç–∞',
                    icon: 'fas fa-shield-alt',
                    basePrice: 80,
                    priceMultiplier: 2.0,
                    maxLevel: 10,
                    effect: () => { }
                },
                {
                    id: 'enemy_resistance',
                    name: 'üí™ –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ',
                    description: '-5% —É—Ä–æ–Ω–∞ –æ—Ç –≤—Ä–∞–≥–æ–≤',
                    icon: 'fas fa-user-shield',
                    basePrice: 100,
                    priceMultiplier: 2.2,
                    maxLevel: 10,
                    effect: () => { }
                },
                {
                    id: 'auto_defense',
                    name: 'ü§ñ –ê–≤—Ç–æ–∑–∞—â–∏—Ç–∞',
                    description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–æ–≤',
                    icon: 'fas fa-robot',
                    basePrice: 150,
                    priceMultiplier: 2.5,
                    maxLevel: 5,
                    effect: () => { }
                }
            ]
        };

        // –í—Ä–∞–≥–∏
        let enemies = [];
        let currentTab = 'click';
        let lastClickTime = Date.now();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            renderAll();
            startGameLoops();
            setupEventListeners();

            // –¢–µ—Å—Ç–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
            console.log('MegaClick –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
        }

        // –†–µ–Ω–¥–µ—Ä –≤—Å–µ–≥–æ
        function renderAll() {
            updateResources();
            updateStats();
            renderUpgrades();
            renderAchievements();
            updateEnergyBar();
            renderEnemies();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        function updateResources() {
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('energy').textContent = `${gameState.energy}/${gameState.maxEnergy}`;
            document.getElementById('gems').textContent = gameState.gems;
            document.getElementById('clickCounter').textContent = gameState.clicks;
            document.getElementById('clickPower').textContent = gameState.clickPower;
            document.getElementById('autoClickers').textContent = gameState.autoClickers;
            document.getElementById('enemies').textContent = enemies.length;
            document.getElementById('shieldLevel').textContent = gameState.shieldLevel;
            document.getElementById('generatorLevel').textContent = gameState.generatorLevel;
            document.getElementById('shieldLevel2').textContent = gameState.shieldLevel;
            document.getElementById('generatorLevel2').textContent = gameState.generatorLevel;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–ò–°–ü–†–ê–í–õ–ï–ù–û)
        function updateStats() {
            const stats = [
                { label: '–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤', value: gameState.totalClicks },
                { label: '–í—Å–µ–≥–æ –º–æ–Ω–µ—Ç', value: gameState.totalCoinsEarned },
                { label: '–í—Ä–∞–≥–æ–≤ –ø–æ–±–µ–∂–¥–µ–Ω–æ', value: gameState.totalEnemiesDefeated },
                { label: '–ö–ª–∏–∫–æ–≤/—Å–µ–∫', value: gameState.clicksPerSecond.toFixed(1) },
                { label: '–°–∏–ª–∞ —â–∏—Ç–∞', value: `${gameState.shieldLevel * 10}%` },
                { label: '–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è', value: `${gameState.generatorLevel}/—Å–µ–∫` },
                { label: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', value: `${Math.max(0, 100 - gameState.upgrades.efficient_clicks * 10)}%` },
                { label: '–®–∞–Ω—Å –∫—Ä–∏—Ç–∞', value: `${gameState.upgrades.critical_chance * 3}%` }
            ];

            const grid = document.getElementById('statsGrid');
            grid.innerHTML = '';

            stats.forEach(stat => {
                const div = document.createElement('div');
                div.className = 'stat-item';
                div.innerHTML = `
                    <div class="stat-label">${stat.label}</div>
                    <div class="stat-value">${stat.value}</div>
                `;
                grid.appendChild(div);
            });
        }

        // –†–µ–Ω–¥–µ—Ä —É–ª—É—á—à–µ–Ω–∏–π
        function renderUpgrades() {
            const grid = document.getElementById('upgradesGrid');
            grid.innerHTML = '';

            const currentUpgrades = upgradesData[currentTab];

            currentUpgrades.forEach(upgrade => {
                const level = gameState.upgrades[upgrade.id] || 0;
                const price = Math.floor(upgrade.basePrice * Math.pow(upgrade.priceMultiplier, level));
                const canBuy = gameState.coins >= price && level < upgrade.maxLevel;

                const div = document.createElement('div');
                div.className = `upgrade-item ${canBuy ? '' : 'locked'}`;
                div.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <i class="${upgrade.icon}" style="font-size: 24px;"></i>
                        <div>
                            <div style="font-weight: bold; margin-bottom: 5px;">${upgrade.name} (${level}/${upgrade.maxLevel})</div>
                            <div style="font-size: 12px; color: #aaa;">${upgrade.description}</div>
                        </div>
                    </div>
                    <div class="upgrade-cost">
                        <span style="color: #ffcc00;">${price}</span>
                        <i class="fas fa-coins" style="color: #ffcc00;"></i>
                    </div>
                `;

                if (canBuy) {
                    div.onclick = () => buyUpgrade(upgrade.id, price, upgrade);
                }

                grid.appendChild(div);
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(id, price, upgradeData) {
            if (gameState.coins < price) return;

            gameState.coins -= price;
            gameState.upgrades[id] = (gameState.upgrades[id] || 0) + 1;

            if (upgradeData.effect) {
                upgradeData.effect();
            }

            // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π
            switch(id) {
                case 'power_boost':
                    gameState.clickPower += 1;
                    break;
                case 'energy_capacity':
                    gameState.maxEnergy += 20;
                    break;
            }

            updateResources();
            updateStats();
            renderUpgrades();
            checkAchievements();
            saveGame();

            showNotification(`–£–ª—É—á—à–µ–Ω–∏–µ "${upgradeData.name}" –∫—É–ø–ª–µ–Ω–æ!`);
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
        document.getElementById('clickBtn').addEventListener('click', handleClick);

        function handleClick() {
            const now = Date.now();
            const timeDiff = now - lastClickTime;

            // –†–∞—Å—á–µ—Ç —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –∫–ª–∏–∫
            const energyCost = Math.max(1, 10 - gameState.upgrades.efficient_clicks);

            if (gameState.energy < energyCost) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!', 2000);
                return;
            }

            // –ê–Ω–∏–º–∞—Ü–∏—è
            const btn = document.getElementById('clickBtn');
            btn.classList.add('click-animation');
            setTimeout(() => btn.classList.remove('click-animation'), 200);

            // –¢—Ä–∞—Ç–∏–º —ç–Ω–µ—Ä–≥–∏—é
            gameState.energy -= energyCost;

            // –†–∞—Å—á–µ—Ç –∫–ª–∏–∫–∞
            let basePower = gameState.clickPower;

            // –®–∞–Ω—Å –∫—Ä–∏—Ç–∞
            const critChance = gameState.upgrades.critical_chance * 0.03;
            const isCrit = Math.random() < critChance;
            if (isCrit) basePower *= 2;

            // –®–∞–Ω—Å –º–µ–≥–∞-–∫–ª–∏–∫–∞
            const megaChance = gameState.upgrades.mega_click * 0.05;
            const isMega = Math.random() < megaChance;
            if (isMega) basePower *= 10;

            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∏–∫–∏ –∏ –º–æ–Ω–µ—Ç—ã
            gameState.clicks += basePower;
            gameState.coins += basePower;
            gameState.totalClicks += 1;
            gameState.totalCoinsEarned += basePower;

            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∏–∫–∏ –≤ —Å–µ–∫—É–Ω–¥—É
            if (timeDiff > 0) {
                gameState.clicksPerSecond = 1000 / timeDiff;
            }

            lastClickTime = now;

            // –≠—Ñ—Ñ–µ–∫—Ç
            createClickEffect(basePower, isCrit, isMega);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            updateResources();
            updateStats();
            checkAchievements();
            saveGame();
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∫–ª–∏–∫–∞
        function createClickEffect(value, isCrit, isMega) {
            const btn = document.getElementById('clickBtn');
            const rect = btn.getBoundingClientRect();

            const effect = document.createElement('div');
            effect.className = 'coin-gain';
            effect.textContent = `+${value}`;
            effect.style.left = `${rect.left + rect.width / 2}px`;
            effect.style.top = `${rect.top}px`;
            effect.style.color = isMega ? '#ff00ff' : isCrit ? '#ff9900' : '#00ff88';
            effect.style.fontSize = isMega ? '28px' : isCrit ? '24px' : '20px';

            if (isMega) effect.textContent = `‚ö° ${value} ‚ö°`;
            else if (isCrit) effect.textContent = `üî• ${value} üî•`;

            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 1000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ—Å–∫–∏ —ç–Ω–µ—Ä–≥–∏–∏
        function updateEnergyBar() {
            const percentage = (gameState.energy / gameState.maxEnergy) * 100;
            document.getElementById('energyFill').style.width = `${percentage}%`;
            document.getElementById('energyText').textContent = `${Math.floor(percentage)}%`;
        }

        // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏
        function regenerateEnergy() {
            const regenRate = 1 + gameState.generatorLevel + gameState.upgrades.energy_regen;
            gameState.energy = Math.min(gameState.maxEnergy, gameState.energy + regenRate);
            updateResources();
            updateEnergyBar();
        }

        // –£–ª—É—á—à–µ–Ω–∏–µ —â–∏—Ç–∞
        function upgradeShield() {
            const cost = 50;
            if (gameState.energy >= cost) {
                gameState.energy -= cost;
                gameState.shieldLevel += 1;
                updateResources();
                showNotification('–©–∏—Ç —É–ª—É—á—à–µ–Ω!');
                saveGame();
            } else {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!');
            }
        }

        // –£–ª—É—á—à–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
        function upgradeGenerator() {
            const cost = 100;
            if (gameState.energy >= cost) {
                gameState.energy -= cost;
                gameState.generatorLevel += 1;
                updateResources();
                showNotification('–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É–ª—É—á—à–µ–Ω!');
                saveGame();
            } else {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏!');
            }
        }

        // –í—Ä–∞–≥–∏
        function spawnEnemy() {
            if (Math.random() < 0.1) { // 10% —à–∞–Ω—Å –ø–æ—è–≤–ª–µ–Ω–∏—è –≤—Ä–∞–≥–∞
                enemies.push({
                    id: Date.now(),
                    health: 50 + enemies.length * 10,
                    maxHealth: 50 + enemies.length * 10,
                    damage: 5,
                    reward: 10 + enemies.length * 5
                });
                renderEnemies();
            }
        }

        function renderEnemies() {
            const container = document.getElementById('enemiesContainer');
            container.innerHTML = '';

            enemies.forEach((enemy, index) => {
                const div = document.createElement('div');
                div.className = 'enemy';
                div.innerHTML = `
                    <i class="fas fa-robot" style="font-size: 30px;"></i>
                    <div class="enemy-health">
                        <div class="enemy-health-fill" style="width: ${(enemy.health / enemy.maxHealth) * 100}%"></div>
                    </div>
                `;

                div.onclick = () => attackEnemy(index);
                container.appendChild(div);
            });
        }

        function attackEnemy(index) {
            if (gameState.energy < 20) {
                showNotification('–ù—É–∂–Ω–æ 20 —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –∞—Ç–∞–∫–∏!');
                return;
            }

            gameState.energy -= 20;

            const enemy = enemies[index];
            const damage = gameState.clickPower + gameState.shieldLevel * 5;
            enemy.health -= damage;

            // –ê–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏
            const btn = document.getElementById('attackBtn');
            if (btn) {
                btn.classList.add('attacking');
                setTimeout(() => btn.classList.remove('attacking'), 300);
            }

            if (enemy.health <= 0) {
                // –í—Ä–∞–≥ –ø–æ–±–µ–∂–¥–µ–Ω
                const reward = enemy.reward;
                gameState.coins += reward;
                gameState.gems += Math.floor(reward / 10);
                gameState.totalEnemiesDefeated += 1;
                enemies.splice(index, 1);

                showNotification(`–í—Ä–∞–≥ –ø–æ–±–µ–∂–¥–µ–Ω! +${reward} –º–æ–Ω–µ—Ç`);
            }

            updateResources();
            renderEnemies();
            saveGame();
        }

        // –ê–≤—Ç–æ–∞—Ç–∞–∫–∞ –≤—Ä–∞–≥–æ–≤
        function autoAttackEnemies() {
            if (gameState.upgrades.auto_defense > 0 && enemies.length > 0) {
                const enemyIndex = Math.floor(Math.random() * enemies.length);
                attackEnemy(enemyIndex);
            }
        }

        // –°—Ç–∞—Ä—Ç –∞—Ç–∞–∫–∏ (—Ä—É—á–Ω–∞—è)
        function startAttack() {
            if (enemies.length === 0) {
                spawnEnemy();
                showNotification('–í—Ä–∞–≥ –ø–æ—è–≤–∏–ª—Å—è!');
            } else {
                attackEnemy(0);
            }
        }

        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function checkAchievements() {
            const achievements = [
                {
                    id: 'first_100_clicks',
                    check: () => gameState.totalClicks >= 100,
                    name: '100 –∫–ª–∏–∫–æ–≤!',
                    icon: 'fas fa-star'
                },
                {
                    id: 'energy_master',
                    check: () => gameState.maxEnergy >= 500,
                    name: '–ú–∞—Å—Ç–µ—Ä —ç–Ω–µ—Ä–≥–∏–∏',
                    icon: 'fas fa-bolt'
                },
                {
                    id: 'enemy_slayer',
                    check: () => gameState.totalEnemiesDefeated >= 10,
                    name: '–£–±–∏–π—Ü–∞ –≤—Ä–∞–≥–æ–≤',
                    icon: 'fas fa-skull-crossbones'
                },
                {
                    id: 'rich_player',
                    check: () => gameState.coins >= 1000,
                    name: '–ë–æ–≥–∞—á',
                    icon: 'fas fa-gem'
                },
                {
                    id: 'click_god',
                    check: () => gameState.clickPower >= 100,
                    name: '–ë–æ–≥ –∫–ª–∏–∫–æ–≤',
                    icon: 'fas fa-crown'
                }
            ];

            achievements.forEach(ach => {
                if (ach.check() && !gameState.achievements[ach.id]) {
                    gameState.achievements[ach.id] = true;
                    showNotification(`üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${ach.name}!`, 3000);
                    renderAchievements();
                }
            });
        }

        function renderAchievements() {
            const grid = document.getElementById('achievementsGrid');
            grid.innerHTML = '';

            Object.entries(gameState.achievements).forEach(([id, unlocked]) => {
                const achievement = [
                    { id: 'first_100_clicks', name: '100 –∫–ª–∏–∫–æ–≤', icon: 'fas fa-star' },
                    { id: 'energy_master', name: '–≠–Ω–µ—Ä–≥–∏—è 500', icon: 'fas fa-bolt' },
                    { id: 'enemy_slayer', name: '10 –≤—Ä–∞–≥–æ–≤', icon: 'fas fa-skull-crossbones' },
                    { id: 'rich_player', name: '1000 –º–æ–Ω–µ—Ç', icon: 'fas fa-gem' },
                    { id: 'click_god', name: '–°–∏–ª–∞ 100', icon: 'fas fa-crown' }
                ].find(a => a.id === id);

                if (achievement) {
                    const div = document.createElement('div');
                    div.className = `achievement ${unlocked ? 'unlocked' : ''}`;
                    div.innerHTML = `
                        <i class="${achievement.icon}"></i>
                        <div class="achievement-name">${achievement.name}</div>
                    `;
                    grid.appendChild(div);
                }
            });
        }

        // –ò–≥—Ä–æ–≤—ã–µ —Ü–∏–∫–ª—ã
        function startGameLoops() {
            // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            setInterval(regenerateEnergy, 1000);

            // –°–ø–∞–≤–Ω –≤—Ä–∞–≥–æ–≤ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            setInterval(spawnEnemy, 10000);

            // –ê–≤—Ç–æ–∞—Ç–∞–∫–∞ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
            setInterval(autoAttackEnemies, 5000);

            // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã
            setInterval(() => {
                if (gameState.autoClickers > 0) {
                    const autoClicks = gameState.autoClickers * gameState.clickPower;
                    gameState.clicks += autoClicks;
                    gameState.coins += autoClicks;
                    gameState.totalClicks += autoClicks;
                    updateResources();
                }
            }, 1000);

            // –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã
            setInterval(() => {
                gameState.playTime += 1;
                updateStats();
            }, 1000);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞
        function saveGame() {
            localStorage.setItem('megaclick_save_v2', JSON.stringify(gameState));
        }

        function loadGame() {
            const saved = localStorage.getItem('megaclick_save_v2');
            if (saved) {
                try {
                    const parsed = JSON.parse(saved);
                    gameState = { ...gameState, ...parsed };
                    showNotification('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                }
            }
        }

        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(text, duration = 2000) {
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 255, 136, 0.9);
                color: #000;
                padding: 12px 24px;
                border-radius: 25px;
                font-weight: bold;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            notification.textContent = text;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s forwards';
                setTimeout(() => notification.remove(), 300);
            }, duration);
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –¢–∞–±—ã —É–ª—É—á—à–µ–Ω–∏–π
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentTab = this.dataset.tab;
                    renderUpgrades();
                });
            });

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
            document.getElementById('saveBtn').addEventListener('click', () => {
                saveGame();
                showNotification('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
            });

            // –ü–æ–º–æ—â—å
            document.getElementById('helpBtn').addEventListener('click', () => {
                document.getElementById('helpModal').style.display = 'flex';
            });

            document.getElementById('closeHelp').addEventListener('click', () => {
                document.getElementById('helpModal').style.display = 'none';
            });

            // –ê–≤—Ç–æ–ø–æ–∫—É–ø–∫–∞ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–æ–≤ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 500 –º–æ–Ω–µ—Ç
            setInterval(() => {
                if (gameState.coins >= 500 && gameState.autoClickers < 10) {
                    gameState.coins -= 500;
                    gameState.autoClickers += 1;
                    updateResources();
                    showNotification('–ö—É–ø–ª–µ–Ω –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä!');
                }
            }, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        }

        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { top: -50px; opacity: 0; }
                to { top: 20px; opacity: 1; }
            }
            @keyframes slideOut {
                from { top: 20px; opacity: 1; }
                to { top: -50px; opacity: 0; }
            }
            @keyframes clickAnimation {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
            .click-animation {
                animation: clickAnimation 0.2s;
            }
            .coin-gain {
                position: fixed;
                z-index: 1000;
                font-weight: bold;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
                animation: floatUp 1s forwards;
                pointer-events: none;
            }
            @keyframes floatUp {
                0% { transform: translateY(0); opacity: 1; }
                100% { transform: translateY(-100px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
